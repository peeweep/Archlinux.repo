# Maintainer: peeweep <peeweep at 0x0 dot ee>

pkgname=('course-crawler-git')
_pkgname=course-crawler
pkgdesc="ğŸ“ ä¸­å›½å¤§å­¦MOOCã€å­¦å ‚åœ¨çº¿ã€ç½‘æ˜“äº‘è¯¾å ‚ã€å¥½å¤§å­¦åœ¨çº¿ã€çˆ±è¯¾ç¨‹ MOOC è¯¾ç¨‹ä¸‹è½½ã€‚"
pkgver=20181219.78aa42c
pkgrel=1
url='https://mooc.xoy.io/'
arch=('any')
license=('MIT')
makedepends=('git')
depends=('python-beautifulsoup4' 'python-lxml' 'python-requests')
source=("${_pkgname}::git+https://github.com/Foair/course-crawler.git"
  ${_pkgname}.sh)
md5sums=('SKIP'
         '2f2a4cfd9c8ae2094365d0c31dc9c501')

pkgver() {
  cd "${srcdir}/${_pkgname}"
  git log -1 --format='%cd.%h' --date=short | tr -d -
}

package() {
  install -dm755 "${pkgdir}/usr/bin"
  install -m755 "${srcdir}/${_pkgname}.sh" "${pkgdir}/usr/bin/${_pkgname}"

  cd "${srcdir}/${_pkgname}"
  install -dm777 "${pkgdir}/usr/share/${_pkgname}"
  install -dm755 "${pkgdir}/usr/share/${_pkgname}/mooc"
  install -m755 mooc.py "${pkgdir}/usr/share/${_pkgname}/mooc.py"
  install -m755 LICENSE "${pkgdir}/usr/share/${_pkgname}/LICENSE"
  install -m755 mooc/*.py "${pkgdir}/usr/share/${_pkgname}/mooc"
}
